/*!
* @author: Jan Wolf (https://jan-wolf.de)
* @license: 2016 Jan Wolf
*/
!function($){"use strict";$.fn.jwLightTwitterWidget=function(options){options=$.extend(!0,{prefix:"jw_lighttwitterwidget",regex:{time:{unknown_variable:/(\s|^)x(\s|$)/gi,plural_indicator:/\[(.*?)]/gi,enclosing:/(seconds|minutes|hours|months|days|years)\((.*?)\)/gi},tweet:/tweet\(\)/gi,name:/name\(\)/gi,screen_name:/screen_name\(\)/gi}},options||{});var prefix=function(e){return options.prefix+"_"+e},resolve_preset=function(e,t){e=e.replace(options.regex.screen_name,t.user.screen_name),e=e.replace(options.regex.name,t.user.name);var a=!1;return e=e.replace(options.regex.time.enclosing,function(e,i,n){if(a)return"";var r=Date.now()-new Date(t.date).getTime();switch(i){case"seconds":r/=1e3;break;case"minutes":r/=6e4;break;case"hours":r/=36e5;break;case"days":r/=864e5;break;case"months":r/=26784e5;break;case"years":r/=31536e6}return r=Math.floor(r),(a=r>=1)?(n=n.replace(options.regex.time.unknown_variable,"$1"+r+"$2"),n.replace(options.regex.time.plural_indicator,r>=2?"$1":"")):""}),e=e.replace(options.regex.tweet,t.text)},always=function(){widgets.removeClass("loading")},error=function(){widgets.addClass("error"),widgets.find("[data-error]").each(function(){$(this).text($(this).attr("data-error"))})},no_tweets=function(){widgets.addClass("no-tweets"),widgets.find("[data-no-tweets]").each(function(){$(this).text($(this).attr("data-no-tweets"))})},widgets=$(this),ajax_obj=eval(prefix("ajaxobj"));$.ajax({url:ajax_obj.endpoint_url,cache:!1,dataType:"json",type:"POST",data:{action:ajax_obj.endpoint_action,nonce:ajax_obj.endpoint_nonce},beforeSend:function(e){e&&e.overrideMimeType&&e.overrideMimeType("application/json;charset=UTF-8")}}).always(always).fail(error).done(function(e){switch(e.status){case"success":widgets.find("[data-preset]").each(function(){var t=resolve_preset($(this).attr("data-preset"),e.tweet),a=$(this).attr("data-preset-on");void 0===a?$(this).html(t):$(this).attr(a,t)}),widgets.find("[data-avatar]").each(function(){var t=e.tweet.user.image.replace("_normal.","_200x200.");return $(this).is("img")?void $(this).attr("src",t):void $(this).css("background-image","url("+t+")")});break;case"no-tweets":no_tweets();break;default:error()}})},$(document).ready(function(){eval("jw_lighttwitterwidget_ajaxobj").autoload&&$(".jw_lighttwitterwidget_widget").jwLightTwitterWidget()})}(jQuery);